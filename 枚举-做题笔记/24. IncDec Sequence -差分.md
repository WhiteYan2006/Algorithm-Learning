---
date: 2025-07-29
tags:
  - 编程
  - 算法
  - Cpp
  - 差分
  - 枚举
  - 习题
---

# P4552 [Poetize6] IncDec Sequence

## 题目描述

给定一个长度为 $n$ 的数列 ${a_1,a_2,\cdots,a_n}$，每次可以选择一个区间$[l,r]$，使这个区间内的数都加 $1$ 或者都减 $1$。 
  
请问至少需要多少次操作才能使数列中的所有数都一样，并求出在保证最少次数的前提下，最终得到的数列有多少种。

## 输入格式

第一行一个正整数 $n$   
接下来 $n$ 行,每行一个整数,第 $i+1 $行的整数表示 $a_i$。

## 输出格式

第一行输出最少操作次数   
第二行输出最终能得到多少种结果

## 输入输出样例 #1

### 输入 #1

```
4
1
1
2
2
```

### 输出 #1

```
1
2
```

## 说明/提示

对于 $100\%$ 的数据，$n\le 100000, 0 \le a_i \le 2^{31}$。

# 实现
## 思路
- 根据[[算法思想-枚举#^57e4f2|正负性]]原理，只需要统计差分数组中除头尾外正数和负数绝对值的最大值即可得到最小操作数。因为头尾两个数字不影响差分可以随意次操作，所以得到的数组数就是`abs(正数和-负数和)+1`

## 代码
```C++
#include<bits/stdc++.h>
using namespace std;
int main() {
  int n;
  cin >> n;
  vector<long long> a(n);
  for(int i = 0; i < n; i++){
    cin >> a[i];
  }
  adjacent_difference(a.begin(), a.end(), a.begin());
  a[0] = 0; //a[0]不影响差分，可以直接设置为0
  long long pos = 0, neg = 0;
  for (auto &x : a) {
    if (x > 0) pos += x;
    else neg -= x;
  }
  cout << max(pos, neg) << endl;
  cout << abs(pos - neg) + 1 << endl;
}
```