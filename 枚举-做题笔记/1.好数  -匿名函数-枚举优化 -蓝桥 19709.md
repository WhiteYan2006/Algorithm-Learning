---
date: 2025-07-16
tags:
  - 编程
  - 算法
  - 匿名函数
  - 蓝桥杯
  - 枚举
  - 习题
---
- ==本题主要是写法上的优化==
# 题目详情
### 问题描述

一个整数如果按从低位到高位的顺序，奇数位 (个位、百位、万位 ⋯⋯ ) 上的数字是奇数，偶数位 (十位、千位、十万位 ⋯⋯ ) 上的数字是偶数，我们就称之为 “好数”。

给定一个正整数 N，请计算从 1 到 N 一共有多少个好数。

### 输入格式

一个整数 N。

### 输出格式

一个整数代表答案。

### 样例输入 1

```text
24
```

### 样例输出 1

```text
7
```

### 样例输入 2

```text
2024
```

### 样例输出 2

```text
150
```

### 样例说明

对于第一个样例，2424 以内的好数有 11、33、55、77、99、2121、2323，一共 77 个。


# 题解
- 朴素写法
```C++
#include <iostream>
using namespace std;
bool isGood(int x) { //这个函数可以在主函数中用匿名函数替代，因为只用到了一次
	int index = 1;
	while (x) {
		int digit = x%10;
		if (digit%2 != index%2) return false; //实际上digit%2=x%2，可以不用digit
		x /= 10;
		index++; //要优化掉取模的操作，则需要让index值的顺序为101010...可以通过反复异或来实现，即index^=1
	}
	return true;
	// 实际上可以用for循环for(int index=1;x;index^=1,x/=10)来更简洁地实现循环
}
int main()
{
  int n;
  cin >> n;
  int cnt = 0;
  for (int i=1;i<=n;i++) {
    if (isGood(i)) cnt++; // 可以用匿名函数
  }
  cout << cnt << endl;
  return 0;
}
```

- ==简化写法==
```C++
#include <iostream>
using namespace std;
int main()
{
  int n;
  cin >> n;
  int cnt = 0;
  for (int i=1;i<=n;i++) {
    if ([](int x) {
      for (int index=1; x; index ^= 1, x/=10) {
        if (x%2 != index) return false;
      }
      return true;
    }(i)) cnt++;
  }
  cout << cnt << endl;
  return 0;
}
```